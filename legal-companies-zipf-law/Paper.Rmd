---
title: "Зависимость «ранг-размер» в распределении городов России по количеству юридических фирм и их работников"
author: Сёмин П. О.
output: 
  word_document:
    reference: reference.docx
bibliography: biblio.bib
csl: biblio-style.csl
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE,
  message = FALSE,
  warning = FALSE,
  dpi = 300,
  fig.id = FALSE,
  fig.width = 6.6,
  fig.height = 3.3)
```

```{r imports, include=FALSE, cache = TRUE}
source("Script.R")
```

<div custom-style="Author">

Пермский государственный национальный исследовательский университет, г. Пермь

</div>

<br>

*Аннотация:* в статье на данных по России исследуется зависимость числа юридических фирм и их работников с населением города, а также проверяется правило «ранг-размер» применительно к распределению городов по числу юридических фирм и их работников. Предполагается, что зависимость линейная, а правило выполняется, так как правило типично для системы городского расселения в России, а сфера услуг тесно связана с потребностями местного населения и отражает его географические закономерности. Используются открытые данные Федеральной налоговой службы о малых и средних предприятиях и среднесписочной численности работников, преобразованные в табличный геопривязанный набор данных. Методы анализа — линейная регрессия и визуализация данных. Обнаруженная зависимость между населением и числом фирм или работников близка к линейной (R^2^ около 0.7). Правило «ранг-размер» в основном выполняется (R^2^ > 0.9).

*Ключевые слова:* города, юридические услуги, закон Ципфа, ранг-размер, население, число работников, число компаний, открытые данные.

<br>

Одной из широко известных общественно-географических закономерностей является правило «ранг-размер», также известное как закон Ципфа (Zipf's Law) [@Zipf2016]. Оно характеризует распределение городов по размеру [@Kwok2014]. Согласно правилу «ранг-размер», при ранжировании городов по убыванию численности населения, численность населения обратно пропорциональна рангу [@Rastvortseva2020]. Существуют многочисленные исследования, в которых закон Цифпа эмпирически проверяется на материале отдельных стран [@Jiang2011; @Rastvortseva2020], регионов внутри страны [@Giesen2010; @Makarova2017], нескольких стран [@Manaeva2018] или всего мира в целом [@Jiang2015] либо выступает в качестве одного из компонентов теоретической модели для анализа расселения и его изменения [@Balash2013; @Kwok2014]. В то же время интересно проверить, применимо ли правило Ципфа к другим характеристикам городов, таким как число тех или иных фирм и количество занятых в той или иной сфере деятельности, например, в юридических услугах. Теоретически это предположение не лишено оснований, так как сфера услуг тесно связана с потребностями населения, а значит, её география и сопутствующие закономерности также должны быть похожи.

В данной статье ставятся два вопроса, касающиеся географии юридических услуг в России. Первый: как связана численность населения городов и число юридических фирм и их работников? Второй: соответствует ли распределение числа юридических фирм и их работников в городах России правилу «ранг-размер»?

Для ответа на вопросы используются данные о численности населения городов России, подготовленные коммерческой аналитической фирмой «HFLabs»[^1] и набор данных о российских малых и средних юридических фирмах, собранный автором статьи. Набор данных получен с помощью самостоятельно разработанного консольного приложения на языке программирования Python *ru-smb-companies*[^2]. В качестве источника исходных сведений о фирмах выступают реестр субъектов малого и среднего предпринимательства, свободно распространяемый Федеральной налоговой службой (ФНС) Россиих[^3], а также два дополнительных набора открытых данных ФНС России: сведения о доходах и расходах организаций[^4] и сведения о среднесписочной численности работников организаций[^5]. Использованы сведения о компаниях за 2021 год. Для выбора юридических фирм из всего множества субъектов МСП осуществлена фильтрация по основному коду ОКВЭД, равному 69.10 (деятельность в области права).

[^1]: URL: https://github.com/hflabs/city (дата обращения: 12.03.2024).
[^2]: URL: https://github.com/PavelSyomin/russian-smb-companies (дата обращения: 12.03.2024).
[^3]: URL: https://www.nalog.gov.ru/opendata/7707329152-rsmp/ (дата обращения: 12.03.2024).
[^4]: URL: https://www.nalog.gov.ru/opendata/7707329152-revexp/ (дата обращения: 12.03.2024).
[^5]: URL: https://www.nalog.gov.ru/opendata/7707329152-sshr2019/ (дата обращения: 12.03.2024).

Из компаний были исключены те, которые отчитались о нулевых доходах или расходах. При нулевой отчётной численности работников предполагалось, что в компании работает один человек. Иннополис был исключён из списка городов из-за крайне небольшого числа жителей. Для проверки гипотез использовались линейная регрессия и визуализация данных. При построении линейных моделей зависимая и независимая переменные логарифмированы. Анализ выполнен с помощью языка программирования R и дополнительных пакетов к нему. Исходный код доступен в публичном репозитории[^6].

[^6]: URL: (дата обращения: 12.03.2024).

Зависимость между населением города и числом юридических фирм, зарегистрированных в нём, а также числом работников этих фирм, близка к линейной, что видно на графиках (рис. 1). Следует заметить, что обе оси логарифмированы, чтобы уменьшить асимметрию распределения исходных данных. Линейная аппроксимация, судя по расположению точек на графике, не является оптимальной, и ошибка модели при небольшой численности населения довольно велика, несмотря на сравнительно хороший коэффициент детерминации (R^2^ = `r round(count_pop_rsq, 2)` у модели числа компаний от числа жителей, и R^2^ = `r round(empl_pop_rsq, 2)` у модели числа работников от числа жителей; все коэффициенты статистически значимы). При росте населения города качество модели улучшается.

Правило «ранг-размер» применительно к числу юридических фирм и их работников в основном подтверждается (рис. 2). Коэффициенты детерминации соответствующих линейных моделей близки к единице (R^2^ = `r round(rank_count_rsq, 2)` в случае с компаниями и R^2^ = `r round(rank_empl_rsq, 2)` в случае с работниками; все коэффициенты статистически значимы), и заметные отклонения от линейности характерны только для населённых пунктов с минимальным числом фирм или занятых в них (специфические «зубцы» в начале линий) или для крупнейших городов (правые нижние части графиков). 

Таким образом, количество юридических фирм и занятых в них тесно и линейно связано с численностью населения городов. Это хорошо согласуется с предположением о зависимости уровня развития сферы услуг от числа жителей. Распределение городов России по количеству юридических компаний и их работников в основном соответствует правилу «ранг-размер».

# Литература

<div id="refs"></div>

```{r figure-1-count-empl-by-population, fig.cap="Рисунок 1. Зависимость между населением города и (а) числом юридических фирм, (б) числом работников юридических фирм. Красный пунктир — линейная аппроксимация. Другие пояснения в тексте"}
counts_and_population_plot
```

<br>

```{r figure-2-rank-by-count-empl, fig.cap="Рисунок 2. Зависимость между (а) число юридических фирм, (б) числом работников юридических фирм и рангом населённого пункта, рассчитанным исходя из этого числа. Красный пунктир — линейная аппроксимация. Другие пояснения в тексте"}
rank_size_plot
```

<br>

<div custom-style="Title">

The “Rank-Size” Rule in the Distribution of Russian Cities by the Count of Legal Companies and their Employees

</div>

<div custom-style="Author">

Syomin P. O.

Perm State University, Perm

</div>

<br>

Abstract: This paper examines whether the distribution of Russian cities by the count of legal companies and their employees follows Zipf's Law (rank-size rule). It also investigates the relationship between the city population and the count of legal companies or their workers.Since this rule has been demonstrated for Russian cities and the geography of services is closely related to the geography of population, the study assumes that the rule is followed. The analysis utilizes open data from the Federal Tax Service on small and medium-sized businesses, as well as the average yearly count of employees. The study employs linear regression and data visualization as methods. The relationship between population and the count of legal companies/workers is linear (R^2^ ≈ 0.7), and the distribution of cities by the count of legal companies/employees generally follows Zipf's Law (R^2^ > 0.9).

Keywords: cities, legal services, Zipf's Law, rank-size, population, count of companies, count of employees, open data.

