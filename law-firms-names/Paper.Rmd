---
title: "Spatial Analysis of Russian Law Firms Naming"
author: "Pavel Syomin¹"
output:
  word_document:
    reference_doc: "journal-article/reference.docx"
bibliography: "journal-article/refs.bib"
csl: "journal-article/apa.csl"
link-bibliography: False  
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

<div custom-style="Affiliation">

¹Perm State University, Geographical faculty, Department of social and economic geography, Perm, Russia; e-mail: ntsp\@ya.ru

</div>

<div custom-style="Abstract">

**Abstract:** text.

</div>

<div custom-style="Keywords">

**Keywords:** naming; law firms; text embeddings; economic regions. 
</div>

# 1. Introduction

Geography of services, sometimes referred to as geography of service sector, is one of the essential parts of socio-economic geographical studies in Russia. Its history spans for several decades starting from the 1960s. Geography of services has economic and social dimensions, where the former is concentrated on the business aspects of the services, while the latter is focused on the issues of human well-being arising from the spatial structure of the relevant services [@Tkachenko2016]. Existing scientific literature on the geography of services in Russia covers a broad range of topics, e.g. education [@Shulgina2019], car rental [@Zyrianova2018], catering [@Preobrazhenskiy2018], medical care [@Kazantcev2022; @Panin2023; @Nikoloski2024], internet access [@Nagirnaya2015; @Zemtsov2022]. However, research on some problems is limited, with legal services being one of the notable examples of such a problem [@Tkachenko2016; @Moiseeva2016]. Despite the lack of attention from geographers, spatial aspects of law firms activity worth investigating for the several reasons. First, legal services can be categorized as business and producer services, acting as a representative case, and this category of services is important for the economic development in general, both in national or regional scale [@Hansen1993; @Faulconbridge2019]. Next, despite their relatively small direct economic impact, they have a great indirect importance as the intermediaries and helpers that contribute to the rule of law, social order, stability and predictability of social relations. Third, for regular citizens access to legal aid is important for the protection of human rights and ensuring the social justice, and in this context, the spatial aspects of law services are on par with the spatial issues of medical care [@Blacksell1988; @Blacksell1990].

Geographical research of services may focus on a variety of subjects. Some classical pathways of such research include analysis of centers and systems of service or of consumers' behavior, needs and demands, including estimation of influencing factors, investigation on the actual level of services provision, applied scientific work related to the management of social infrastructure [@Tkachenko2016]. Studies of firm names, sometimes also referred to as company names, brand names or just brands, is relatively unusual yet potentially fruitful method in the geography of services. Firm names are designed to distinguish the business from the competitors, to make an emphasis on the field of activity or its geographical area, inform about services supplied by a provider and corresponding benefits. Having these functions, brands convey a substantial portion of information in a short text message. Such information may be useful to discover the city's business landscape and consumer's perception of a particular city with its characteristic services [@Raento2001], analyze the trends common to a specific industry in a region [@Marjavaara2022] or the role of place as reflected in the toponyms in the business development and consumer attitudes [@Peluso2012; @Zhang2014; @Erdogan2016; @Noorda2019]. Company names represent the characteristics of businesses and thus may act as “meta-proxy” for a bulk of intertwined economic metrics. Such a complex nature makes them suitable for regions identification, especially in the case of vernacular regions [@Reed1976; @Liesch2015; @Vukosav2016; @Holtkamp2018]. Other interactions between places and brands, e.g. the contribution of commercial branding to place branding [@Florek2013] or its compliance with the latter [@BassolsiGardella2023] may also be of interest.

There are thousands of law firms in Russia [@Moiseeva2016]. Their names are likely to reflect some properties of local legal services market. The area of Russia is comprised of regions (constituent entities of the federation) that provide some sort of a commonly used spatial unit for geographical studies. Besides, economic geographers split the country into 11 economic regions [@Leyzerovich2010]. Each economic regions includes several constituent entities and is characterized by internal integrity, economic links between the companies, specialization and difference from the others. It can be hypothesized that the proximity of regions, as well as internal unity and economic links within the economic regions, leads to the similarity of law firms activity and, correspondingly, to the similarity of their naming. The overall aim of this study is to check whether this is true. To achieve this goal, a few research questions are asked and then answered based on the data on law firms names. These questions, or problems, are specified below.

Question 1 (Q1) is whether the neighboring regions have more similar law firm names that regions that do not share a common border. Question 2 (Q2) is a continuous extension of Q1: whether the geographical proximity of regions has an impact on the similarity of law firm names, i.e. whether the regions that are close to each other have more similar names, and vice versa. Question 3 (Q3) moves up from the level of regions to the level of economic regions: whether names within the economic region are more similar compared to the names outside the region. Question 4 (Q4) is what naming strategies exist in Russia and how they are spatially organized. Question 5 (Q5) is a follow-up from the previous: are there strategies common or different within each economic region?

# 2. Materials and methods

## 2.1. Data

The issue of obtaining information about firm names is challenging. Even though all Russian organisations are registered in the unified state registry operated by Federal Tax Service (FTS of Russia), and an extract about a particular company from this registry can be downloaded online by any person free of charge, there is no straightforward way to get names of all companies from the registry at once without paying a considerable amount of money and without negotiating a contract with the responsible government body. There are a few commercial firms that re-cell the data from the registry of companies, but the prices are substantial. To overcome these problems, a Unified state registry of small and medium-sized businesses (SMB registry) was used. This registry has been maintained since 2016 according to the Article 4.1 of Federal Law of July 24, 2007 No 209-FZ “On the development of small and medium-sized businesses in the Russian Federation”. All the companies and individual entrepreneurs that have a yearly revenue below 2 billion roubles and an average yearly number of employees below 250 are automatically included in the SMB registry without any action required on their side. In contrast to the main registries of companies and entrepreneurs, SMB registry can be fully downloaded at the FTS open data portal free of charge, as well as the monthly history of its updates since the beginning of the operation. Thus, this registry can be treated as the most comprehensive free data source with the information about Russian business entities (organisations and individuals). The downloadable version of the registry includes, in particular, firm names, addresses of registration (up to a settlement), and codes of activity kinds according to the All-Russia Classifier of Kinds of Economic Activity. Large firms are not present in the registry, so some data is missing. However, the majority of commercial law firms in Russia (more than 75%) can be categorized as small and medium-sized businesses and are included in the registry, so the availability of information is relatively high, and it can be used for trustworthy conclusions.

## 2.2. Methods

### 2.2.1. FTS data processing

SMB registry dumps from FTS website have a large volume (≈200 Gb in total) and a complex structure: each dump is an archive of several thousand XML files, and each XML file contain 900 records with various information about organisations and individuals. Dumps are monthly, resulting in ≈90 archives for the period from 2016 to the present. If unpacked, all archives would occupy more than 2 Tb of disk space, and the extraction and preprocessing of such volume of data would take a large time. It should be noted, though, that the majority of information is redundant for the task in hand, because it is duplicated due to data publication specific (each archive contains a full copy of the registry, and if nothing has changed during the month, the data records will be merely the same) and because only the data about law firms is required, while the registry holds information about all the other firms as well. To extract necessary data from the raw archives, an open-source Python command-line tool was developed named ru-smb-companies. The main stages of data extractions are outlined in the next paragraph, while for the complete information about data processing workflow readers may refer to the source code of the program.

FTS data processing took several steps. First, all source archives available at the time of research (November 2023) were downloaded  from FTS servers and stored both locally and in the cloud. Next, information about law firms was extracted from each archive to a CSV file. Extracted attributes include company or person name, address of incorporation (region, district, city, settlement), taxpayer ID, main activity code and some other properties. After this, CSV tables were combined into one table, deduplicated, and raw addresses were normalized and geocoded to fix the inconsistency in location names and add geographical coordinates. Finally, the resulting table was transformed in a panel view so that each row represents one business entity at a given year. The output table contains data about ≈ 30, 000 law firms for 2016–23. 

### 2.2.2. Firm names processing

A major challenge regarding the methods of this study is the working with names. The objectives of the research imply that names should be grouped and compared in some way. This can easily be accomplished with numbers, but firm names are just short text sequences. Of course, a human can easily say whether two names are similar or not and classify them. However, the human-based approach does not scale well, and the quantity of names requires automation. There are several traditional techniques allowing us to compare text strings. For example, edit distance calculates the number of atomic changed required to turn one string to another, and the edit distance between “cat” and “car” is 1, while the edit distance between “car” and “karst” is 3. Another method named n-gram similarity splits the strings into subsequences, or tokens, and finds the number of common tokens, so that “law company” and “law bureau” are more close to each other than “law bureau” and “juridical center”. Despite their simplicity, they also have a significant disadvantage: they cannot account for the intrinsic variability and flexibility of language and do not consider the meaning of the words and phrases rather than their formal representation. For instance, a human understands that “law company” and “legal organisation” mean almost the same, while edit distance between these strings is high, and n-gram similarity is low. A modern method called text embeddings (sometimes referred to as vectors) can deal with this issue and therefore it is used for this research.

Text embedding, or vector, is a numeric representation of a word, sentence or a document usually designed to catch the meaning of the text. An embedding typically looks like just a sequence of decimals with fixed length, i.e. the count of elements in this sequence does not depend on the length of the input text, so that a short sentence or an entire paragraph are represented as a sequence of, say, 256 numbers. Vectors allow simple computations to find out whether they are more or less similar to each other, and the similarity of vectors corresponds to the similarity of texts. Thus, by computing a mathematical distance between embeddings, one can conclude about the semantic distance between texts. This is right the case of firm names comparison, similarity, and grouping.

There are various methods of obtaining embeddings for different texts, e.g. Word2Vec, GloVe, FastText. The newest GPT-based pretrained large language models such as ChatGPT are also capable of producing text vectors. For this study, embeddings from YandexGPT model were used. These embeddings were obtained for each unique firm name via public API of the model. The vector dimensionality is 256, i.e. each vector is a sequence of 256 numbers. All the concrete hypothesis testing techniques outlined in the next subsection are based on the use of these vectors.

### 2.2.3. Hypothesis testing

To answer Q1, firm names vectors by each region were averaged so that all names of a region are represented with a single vector that equals to the mathematical mean of all firm names vectors within this region. All regions are divided into two groups depending on the presence of common border between them. Pairwise distances between all the regions are calculated, and then median distance between regions in each of two groups is calculated. The results are additionally visualized as a box plot. It is expected that median distance between neighboring regions is smaller than median distance between regions that do not have a same border.

The similar technique is used for Q2. Again, the mean vector of all firm names for each region is computed, and pairwise semantic distance between regions is calculated. Then, a geographical distance between the centroids of regions is also measured. A correlation between geographical distance and semantic distance is computed, and the result is plotted. It is expected that the coefficient of correlation is positive.

Q3 also builds upon the pairwise semantic distances between regions. After these distances are found out, regions are grouped by economic regions. For each economic region, two metrics are calculated: the first is a median distance between regions within this econoimic region, and the second is a median distance between regions within and without this economic region. It is expected that within-median-distance is smaller that beyond-median-distance. The results are additionally illustrated on a boxplot.

Q4 and Q5 follow a slightly different methodics. First, all firm names are clustered with KMeans algorithm (number of clusters is 50). After clustering, a random sample of names from each cluster is taken, and these names are manually checked, described and tagged with the labels of more broad groups. Then these manually defined groups are assigned to names using clusters as links between groups and individual names. The number of names belonging to each group in each region is calculated, and the results of this calculation are mapped on a tile-grid map of Russia to analyze the spatial properties of grouping. In this way, Q4 is processed. For Q5, the regions are marked with the label of the most popular group, and the number of regions with different groups within an economic region is counted. It is expected that each economic regions is characterized with only one majority group. It may be the same as the group for another economic region, but a small if any variation is expected within an economic region to prove its integrity. Also, in general it is expected that there are several clear and meaningful firm naming groups, or naming strategies, and that these groups may have (or not) some clear geographical patterns.

### 2.2.4. Other important considerations

The time range of the source data is from 2016 to 2023. Only the firms that have existed for at least 3 years are included in the analysis. Only organizations are studied, while individual entrepreneurs are omitted, because they do not have firm names. Firm names are preprocessed to remove any parts pointing to the legal form of the business (e.g. limited liability company or public stock company), because these parts are common to the majority of names and thus do not add anything valuable. Law firms are selected by filtering using the following condition: main activity code equals 69.10 (activity in the area of law according to All-Russia Classifier of Kinds of Economic Activity). This filtering technique is derived from @Moiseeva2016. 


# 3. Results and discussion

# 4. Conclusion

<div custom-style="References-title">References</div>

<div id="refs"></div>


